<br><br><br><br>
<br>
<% if @user %>
  <br>
  <% if current_user.followings.find { |following| following.following_id == @user.id } %>
    <%= link_to '–û—Ç–ø–∏—Å–∞—Ç—å—Å—è', unfollow_path(@user), method: :delete %>
  <% else %>
    <% if current_user.id != @user.id %>
      <%= link_to '–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è', follow_path(@user), method: :post %>
    <% end %>
  <% end %>
  <h1><%= @user.username %></h1>
  <br><br>
  <%= link_to "–ü–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª–∑—å–æ–≤–∞—Ç–µ–ª—è #{@user.username}", followings_path(@user.id) %><br>
  <%= link_to "–ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –ø–æ–ª–∑—å–æ–≤–∞—Ç–µ–ª—è #{@user.username}", followers_path(@user.id) %><br>

  <% if current_user.id == @user.id %>
    <%= link_to '–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç', new_post_path %>
  <% end %>

  <% @user.post.each do |post| %>
    <div class="post" style="background: #B00100; color: yellowgreen">
      <%= post.title %>
      <%= image_tag(post.image) %>
      <br>
      <div class="likes">
        <% if Like.user_liked_post?(current_user.id, post.id) %>
          <%= form_with(model: Like.new, local: true) do |form| %>
            <%= form.number_field :user_id, id: :user_id, value: current_user.id, type: :hidden %>
            <%= form.number_field :post_id, id: :post_id, value: post.id, type: :hidden %>
            <div class="actions">
              <%= form.submit "‚ô•(#{Like.count_post_likes(post.id)})" %>
            </div>
          <% end %>
      <% else %>
          <%= link_to "üíî(#{Like.count_post_likes(post.id)})",
                      like_path(Like.find_by_user_id_and_post_id(current_user.id, post.id).id), method: :delete %>
        <% end %>
      </div>

      <br>

      <div class="commentaries">
        <% post.commentary.each do |comment| %>
          <div class="commentary">
            <h1 style="color: cyan"><%= comment.user.username %></h1><br>
            <p style="color: pink"><%= comment.comment_text %></p>
            <% if comment.user_id == current_user.id || current_user.id == @user.id %>
              <%= link_to "–£–¥–∞–ª–∏—Ç—å", commentary_path(comment.id), method: :delete %>
            <% end %>
            <% if comment.user_id == current_user.id %>
              <%= link_to "–ò–∑–º–µ–Ω–∏—Ç—å", edit_commentary_path(comment.id) %>
            <% end %>
          </div>
        <% end %>
      </div>
      <%= link_to "–ü—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å", new_comment_path(post.id) %>
    </div>
    <br>
  <% end %>


<% else %>
  <h1>–¢–∞–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.</h1>
<% end %>
